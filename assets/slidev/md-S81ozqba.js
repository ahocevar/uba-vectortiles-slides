const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/CodeRunner-ChPoabWF.js","assets/modules/unplugin-icons-DURxq7St.js","assets/modules/vue-C10BxpJy.js","assets/monaco/bundled-types-B0nSufkl.js","assets/modules/file-saver-igGfcqei.js","assets/monaco/bundled-types-8Nxzhiz4.css","assets/slidev/context-DC0wzfoI.js","assets/index-ClURjBdN.js","assets/modules/shiki-gSk8N4GD.js","assets/modules/shiki-BPvBenZD.css","assets/index-CYk6A1vp.css","assets/slidev/IconButton.vue_vue_type_script_setup_true_lang-B7HcTkTk.js","assets/CodeRunner-YBfxSSx9.css"])))=>i.map(i=>d[i]);
import{_,h as F}from"../monaco/bundled-types-B0nSufkl.js";import{d as U,t as u,A as x,a5 as Z,S as J,n as M,o as w,b as q,e as r,h as X,c as $,J as h,g as ee,a6 as te,k as oe,I as v,l as D,m as L,q as ne,s as ae}from"../modules/vue-C10BxpJy.js";import{l as N}from"../lz-string-7V7f_eN4.js";import{k as ie,m as I}from"../index-ClURjBdN.js";import{u as R,f as re}from"./context-DC0wzfoI.js";import{I as le}from"./default-B8GzIpyp.js";import"../modules/file-saver-igGfcqei.js";import"../modules/shiki-gSk8N4GD.js";const se={class:"relative slidev-monaco-container"},de=U({__name:"Monaco",props:{codeLz:{default:""},diffLz:{},lang:{default:"typescript"},readonly:{type:Boolean,default:!1},lineNumbers:{default:"off"},height:{default:"initial"},editorOptions:{},ata:{type:Boolean,default:!0},runnable:{type:Boolean,default:!1},writable:{},autorun:{type:[Boolean,String],default:!0},showOutputAt:{type:[null,Boolean,String,Number,Array]},outputHeight:{},highlightOutput:{type:Boolean,default:!0},runnerOptions:{}},setup(z){const e=z,B=te(()=>_(()=>import("./CodeRunner-ChPoabWF.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(d=>d.default)),l=u(N.decompressFromBase64(e.codeLz).trimEnd()),A=e.diffLz&&u(N.decompressFromBase64(e.diffLz).trimEnd()),E=x(()=>e.writable&&!e.readonly&&!1),c={ts:"typescript",js:"javascript"}[e.lang]??e.lang,o={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[e.lang]??e.lang,f=u(),C=u(),y=u(0),s=u(),K=x(()=>e.height==="auto"?`${y.value}px`:e.height==="initial"?`${s.value}px`:e.height),k=u(),{$page:j,$renderContext:T}=R(),{currentSlideNo:Y}=ie(),G=Z(()=>Math.abs(j.value-Y.value)<=1&&k.value,d=>{["slide","presenter"].includes(T.value)?d():setTimeout(d,5e3)});return J(async()=>{const{default:d}=await _(async()=>{const{default:t}=await import("../monaco/bundled-types-B0nSufkl.js").then(i=>i.x);return{default:t}},__vite__mapDeps([3,2,4,5])),{ata:p,monaco:n,editorOptions:H}=await d(),g=n.editor.createModel(l.value,c,n.Uri.parse(`file:///${I()}.${o}`));g.onDidChangeContent(()=>l.value=g.getValue());const O={automaticLayout:!0,readOnly:e.readonly,lineNumbers:e.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontSize:11.5,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,useInlineViewWhenSpaceIsLimited:!1,...H,...e.editorOptions};let a;if(A){const t=n.editor.createModel(A.value,c,n.Uri.parse(`file:///${I()}.${o}`));t.onDidChangeContent(()=>l.value=g.getValue());const i=n.editor.createDiffEditor(C.value,{renderOverviewRuler:!1,...O});i.setModel({original:g,modified:t});const m=i.getOriginalEditor(),b=i.getModifiedEditor(),S=()=>{const V=Math.max(m.getContentHeight(),b.getContentHeight())+4;s.value??(s.value=V),y.value=V,M(()=>i.layout())};m.onDidContentSizeChange(S),b.onDidContentSizeChange(S),a=b}else{const t=n.editor.create(C.value,{model:g,lineDecorationsWidth:0,...O});t.onDidContentSizeChange(i=>{const m=i.contentHeight+4;s.value??(s.value=m),y.value=m,M(()=>a.layout())}),a=t}k.value=()=>{G(),_(()=>import("../monaco/bundled-types-B0nSufkl.js").then(t=>t.y),__vite__mapDeps([3,2,4,5])),e.ata&&(p(a.getValue()),a.onDidChangeModelContent(F(1e3,()=>{p(a.getValue())})))};const Q=a.layoutContentWidget.bind(a);a.layoutContentWidget=t=>{Q(t),t.getId()==="editor.contrib.resizableContentHoverWidget"&&(t._resizableNode.domNode.style.transform=t._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},a.addAction({id:"slidev-save",label:"Save",keybindings:[n.KeyMod.CtrlCmd|n.KeyCode.KeyS],run:()=>{E.value,console.warn("[Slidev] this monaco editor is not writable, save action is ignored.")}}),M(()=>n.editor.remeasureFonts())}),(d,p)=>(w(),q("div",se,[r("div",{ref_key:"outer",ref:f,class:"relative slidev-monaco-container-inner",style:X({height:K.value})},[r("div",{ref_key:"container",ref:C,class:"absolute inset-0.5"},null,512)],4),e.runnable?(w(),$(h(B),{key:0,modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=n=>l.value=n),lang:h(c),autorun:e.autorun,"show-output-at":e.showOutputAt,height:e.outputHeight,"highlight-output":e.highlightOutput,"runner-options":e.runnerOptions},null,8,["modelValue","lang","autorun","show-output-at","height","highlight-output","runner-options"])):ee("v-if",!0)]))}}),ue={__name:"slides.md__slidev_26",setup(z){const{$slidev:e,$nav:B,$clicksContext:l,$clicks:A,$page:E,$renderContext:W,$frontmatter:c}=R();return l.setup(),(P,o)=>{const f=de;return w(),$(le,ne(ae(h(re)(h(c),25))),{default:oe(()=>[o[0]||(o[0]=r("h1",null,"Monaco Editor",-1)),o[1]||(o[1]=r("p",null,"Slidev provides built-in Monaco Editor support.",-1)),o[2]||(o[2]=r("p",null,[v("Add "),r("code",null,"{monaco}"),v(" to the code block to turn it into an editor:")],-1)),D(f,L({"code-lz":"JYWwDg9gTgLgBAbzlApgMzgXzmqERwDkAbgK4qEBQoksicK4MAngIJRQCGzWOeBhAHQB6FAA8YKKADtOAGyqUAxhGkBneJw5wAvMnQAKRmBbsuzAwEYADAEpblIA",lang:"ts"},{}),null,16),o[3]||(o[3]=r("p",null,[v("Use "),r("code",null,"{monaco-run}"),v(" to create an editor that can execute the code directly in the slide:")],-1)),D(f,L({runnable:"","code-lz":"JYWwDg9gTgLgBAbzgNwKZQM7AgOzgXzgDMoIQ4ByZAV1QoChRJZE5VwYBPAQSigENOAGjgZBACVQAbKRALFS5CgDoA9KgAeMdDn5SG9MZ0kyIACgCU9AMa4MEKamWyA5mYAGNVHAAkCNJjYOPjuVrY49o7OEG7sYFy8ApwAPDjUIABG6AB8ZgCMAAwWylCoACbU1qhmRMAZcAC82XAA2srttRkincr8MGYAtHkWAIRwANTEdb39AwBMowC6Ii15InmLFlZAA",lang:"ts"},{}),null,16)]),_:1},16)}}},Ce=ue;export{Ce as default};
